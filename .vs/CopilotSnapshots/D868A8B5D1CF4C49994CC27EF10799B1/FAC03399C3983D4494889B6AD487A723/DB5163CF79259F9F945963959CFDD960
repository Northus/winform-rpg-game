using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using rpg_deneme.Models;
using System.Collections.Generic;

namespace rpg_deneme.Business
{
    public static class EnemyFactory
    {
        /// <summary>
        /// Tek bir şablondan, belirtilen sayıda ve güçte düşman listesi üretir.
        /// </summary>
        public static List<EnemyModel> CreateEnemies(EnemyModel template, int count, float multiplier)
        {
            var list = new List<EnemyModel>();

            for (int i = 0; i < count; i++)
            {
                // Her biri için yeni kopya oluştur (Referans karışmaması için)
                var scaledEnemy = ScaleEnemy(template, multiplier);
                list.Add(scaledEnemy);
            }

            return list;
        }

        /// <summary>
        /// Bir düşman şablonunu kopyalar ve statlarını çarpanla artırır.
        /// Ayrıca Ranged/Melee ayarlarını yapar.
        /// </summary>
        public static EnemyModel ScaleEnemy(EnemyModel template, float multiplier)
        {
            // Ranged kontrolü tek bir yerde!
            bool isRanged = (template.SpritePath == "RANGED");

            return new EnemyModel
            {
                EnemyID = template.EnemyID,
                Name = template.Name,
                Level = template.Level,

                // Statları Çarp
                MaxHP = (int)(template.MaxHP * multiplier),
                CurrentHP = (int)(template.MaxHP * multiplier),
                Damage = (int)(template.Damage * multiplier),
                ExpReward = (int)(template.ExpReward * multiplier),
                GoldReward = (int)(template.GoldReward * multiplier),

                // Görsel ve Tip Özellikleri
                SpritePath = template.SpritePath, // "RANGED" bilgisini koru
                Width = 64,
                Height = 64,

                // Hız ayarı (Ranged ise biraz daha hızlı kaçsın)
                Speed = isRanged ? 3.5f : 3.0f
            };
        }
    }
}
